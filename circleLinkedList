#include <iostream>
using namespace std;

struct Node{
    int data;
    Node * next;
};



/*傳雙重指標是為了在主程式中也要改變head所指向的東西*/
void circleLinkedListInsert(Node ** head,int data){
    struct Node * temp,* pre,* cur ,* last;

    Node * newNode = new Node();
    newNode->data=data;
    newNode->next=newNode;
    temp=*head;
    cur=*head;
    
    //若head節點還沒new空間時
    if(!temp){
        *head=newNode;
        return;
    }
    
    do{
        cur=cur->next;
        last=cur;
    }while(cur->next!=(*head));
    
    do{
        if(data<temp->data){
            if(last->next==temp){
                last->next=newNode;
                newNode->next=temp;
                *head=newNode;
            }else{
                pre->next=newNode;
                newNode->next=temp;
            }
            break;
        }
        
        if(temp->next==(*head) && temp->data<data){
            newNode->next=temp->next;
            temp->next=newNode;
            break;
        }

        pre=temp;
        temp=temp->next;
    }while(temp!=(*head));
    
}

void circleLinkedListDelete(Node ** head,int data){
    
    struct Node * temp,* cur,* last,*pre;
    temp=*head;
    cur=*head;
    
    do{
        temp=temp->next;
        last=temp;
    }while(temp->next!=(*head));
    
    while(true){
        if(cur->data==data){
            if(cur==(*head)){
                last->next=cur->next;
                *head=cur->next;
            }
            else{
                pre->next=cur->next;
            }
            break;
        }
        pre=cur;
        cur=cur->next;
    }
}



int main()
{
    
    Node * head;
    circleLinkedListInsert(&head,2);
    circleLinkedListInsert(&head,4);
    circleLinkedListInsert(&head,3);
    circleLinkedListInsert(&head,5);
    circleLinkedListInsert(&head,1);
    
    circleLinkedListDelete(&head,5);
    
    // head->data=1;
    
    // Node * head1=new Node();
    // head1->data=2;
    
    // Node * head2=new Node();
    // head2->data=3;
    
    // head->next=head1;
    // head1->next=head2;
    
    // cout<<head<<"ssss"<<endl;
    // singleLinkedList(&head,4,5);
    // cout<<head<<"aaaa"<<endl;
    // cout<<head->data<<"bbbb"<<endl;
    
    Node * cur=head;
    
    do{
        cout<<cur->data<<endl;
        cur=cur->next;
    }while(cur!=head);
    
    
    return 0;
}
